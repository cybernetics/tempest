


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Tempest - Typesafe DynamoDB in Kotlin">
      
      
        <link rel="canonical" href="https://cashapp.github.io/tempest/guide/transaction/">
      
      
        <meta name="author" content="Square, Inc.">
      
      <link rel="shortcut icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.3.3">
    
    
      
        <title>Transaction - Tempest</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.fe0cca5b.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.a46bcfb3.min.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../../css/app.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="white" data-md-color-accent="green">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#transactional-read" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://cashapp.github.io/tempest/" title="Tempest" class="md-header-nav__button md-logo" aria-label="Tempest">
      
  <img src="../../img/cashapp.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Tempest
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Transaction
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/cashapp/tempest/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    cashapp/tempest
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://cashapp.github.io/tempest/" title="Tempest" class="md-nav__button md-logo" aria-label="Tempest">
      
  <img src="../../img/cashapp.png" alt="logo">

    </a>
    Tempest
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/cashapp/tempest/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    cashapp/tempest
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Guides
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Guides" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Guides
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../getting_started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../data_modeling/" title="Data Modeling" class="md-nav__link">
      Data Modeling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../crud/" title="CRUD" class="md-nav__link">
      CRUD
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../optimistic_locking/" title="Optimistic Locking" class="md-nav__link">
      Optimistic Locking
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../batch_read_write/" title="Batch Read & Write" class="md-nav__link">
      Batch Read & Write
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../query_scan/" title="Query & Scan" class="md-nav__link">
      Query & Scan
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Transaction
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="Transaction" class="md-nav__link md-nav__link--active">
      Transaction
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#transactional-read" class="md-nav__link">
    Transactional Read
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transactional-write" class="md-nav__link">
    Transactional Write
  </a>
  
    <nav class="md-nav" aria-label="Transactional Write">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#writing-pager" class="md-nav__link">
    Writing Pager
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../testing/" title="Testing" class="md-nav__link">
      Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dynamodb_resources/" title="DynamoDB Resources" class="md-nav__link">
      DynamoDB Resources
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Reference
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Reference" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../1.x/tempest/app.cash.tempest/" title="1.x API" class="md-nav__link">
      1.x API
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../contributing/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../code_of_conduct/" title="Code of Conduct" class="md-nav__link">
      Code of Conduct
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../releasing/" title="Releasing" class="md-nav__link">
      Releasing
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#transactional-read" class="md-nav__link">
    Transactional Read
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transactional-write" class="md-nav__link">
    Transactional Write
  </a>
  
    <nav class="md-nav" aria-label="Transactional Write">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#writing-pager" class="md-nav__link">
    Writing Pager
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/cashapp/tempest/edit/master/docs/guide/transaction.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                  <h1>Transaction</h1>
                
                <p>Amazon DynamoDB <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/transactions.html">transactions</a> simplify the developer experience of making coordinated, all-or-nothing changes to multiple items both within and across tables. Transactions provide atomicity, consistency, isolation, and durability (ACID) in DynamoDB, helping you to maintain data correctness in your applications.</p>
<div class="admonition warning">
<p class="admonition-title">Other regions could observe partial transactions</p>
<p>Transactions are not supported across regions in global tables. For example, if you have a global table with replicas in the US East (Ohio) and US West (Oregon) regions and perform a <code>TransactWriteItems</code> operation in the US East (N. Virginia) Region, you may observe partially completed transactions in US West (Oregon) Region as changes are replicated. Changes will only be replicated to other regions once they have been committed in the source region.</p>
</div>
<h2 id="transactional-read">Transactional Read<a class="headerlink" href="#transactional-read" title="Permanent link">&para;</a></h2>
<p><code>LogicalDb</code> lets you load a consistent snapshot of up to 25 items in a transaction.</p>
<div class="tabbed-set" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><label for="__tabbed_1_1">Kotlin</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">private</span> <span class="k">val</span> <span class="py">db</span><span class="p">:</span> <span class="n">MusicDb</span>

<span class="k">fun</span> <span class="nf">loadPlaylistTracks</span><span class="p">(</span><span class="n">playlist</span><span class="p">:</span> <span class="n">PlaylistInfo</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">val</span> <span class="py">results</span> <span class="p">=</span> <span class="n">db</span><span class="p">.</span><span class="n">transactionLoad</span><span class="p">(</span>
    <span class="n">playlist</span><span class="p">.</span><span class="n">track_tokens</span> <span class="c1">// [ AlbumTrack.Key(&quot;ALBUM_1&quot;, track_number = 1), AlbumTrack.Key(&quot;ALBUM_354&quot;, 12), ... ]</span>
  <span class="p">)</span>
  <span class="k">return</span> <span class="n">results</span><span class="p">.</span><span class="n">getItems</span><span class="p">&lt;</span><span class="n">AlbumTrack</span><span class="p">&gt;()</span>
<span class="p">}</span>
</code></pre></div>

</div>
<input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><label for="__tabbed_1_2">Java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kd">private</span> <span class="kd">final</span> <span class="n">MusicDb</span> <span class="n">db</span><span class="p">;</span>

<span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">AlbumTrack</span><span class="o">&gt;</span> <span class="nf">loadPlaylistTracks</span><span class="p">(</span><span class="n">PlaylistInfo</span> <span class="n">playlist</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">ItemSet</span> <span class="n">results</span> <span class="o">=</span> <span class="n">db</span><span class="p">.</span><span class="na">transactionLoad</span><span class="p">(</span>
      <span class="n">playlist</span><span class="p">.</span><span class="na">playlist_tracks</span> <span class="c1">// [ AlbumTrack.Key(&quot;ALBUM_1&quot;, track_number = 1), AlbumTrack.Key(&quot;ALBUM_354&quot;, 12), ... ]</span>
  <span class="p">);</span>
  <span class="k">return</span> <span class="n">results</span><span class="p">.</span><span class="na">getItems</span><span class="p">(</span><span class="n">AlbumTrack</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

</div>
</div>
<h2 id="transactional-write">Transactional Write<a class="headerlink" href="#transactional-write" title="Permanent link">&para;</a></h2>
<p><code>LogicalDb</code> lets you update, delete, and condition check up to 25 items atomically. </p>
<p>The following example uses transactions to make sure it only adds valid album tracks to the playlist. </p>
<div class="tabbed-set" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><label for="__tabbed_2_1">Kotlin</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">private</span> <span class="k">val</span> <span class="py">db</span><span class="p">:</span> <span class="n">MusicDb</span>
<span class="k">private</span> <span class="k">val</span> <span class="py">table</span><span class="p">:</span> <span class="n">MusicTable</span>

<span class="k">fun</span> <span class="nf">addTrackToPlaylist</span><span class="p">(</span>
  <span class="n">playlistToken</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span>
  <span class="n">albumTrack</span><span class="p">:</span> <span class="n">AlbumTrack</span><span class="p">.</span><span class="n">Key</span>
<span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Read.</span>
  <span class="k">val</span> <span class="py">existing</span> <span class="p">=</span> <span class="n">checkNotNull</span><span class="p">(</span>
    <span class="n">table</span><span class="p">.</span><span class="n">playlistInfo</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">PlaylistInfo</span><span class="p">.</span><span class="n">Key</span><span class="p">(</span><span class="n">playlistToken</span><span class="p">))</span>
  <span class="p">)</span> <span class="p">{</span> <span class="s">&quot;Playlist does not exist: $playlistToken&quot;</span> <span class="p">}</span>
  <span class="c1">// Modify.</span>
  <span class="k">val</span> <span class="py">newPlaylist</span> <span class="p">=</span> <span class="n">existing</span><span class="p">.</span><span class="n">copy</span><span class="p">(</span>
    <span class="n">playlist_tracks</span> <span class="p">=</span> <span class="n">existing</span><span class="p">.</span><span class="n">playlist_tracks</span> <span class="p">+</span> <span class="n">albumTrack</span><span class="p">,</span>
    <span class="n">playlist_version</span> <span class="p">=</span> <span class="n">existing</span><span class="p">.</span><span class="n">playlist_version</span> <span class="p">+</span> <span class="m">1</span>
  <span class="p">)</span>
  <span class="c1">// Write.</span>
  <span class="k">val</span> <span class="py">writeSet</span> <span class="p">=</span> <span class="n">TransactionWriteSet</span><span class="p">.</span><span class="n">Builder</span><span class="p">()</span>
    <span class="p">.</span><span class="n">save</span><span class="p">(</span><span class="n">newPlaylist</span><span class="p">,</span> <span class="n">ifPlaylistVersionIs</span><span class="p">(</span><span class="n">existing</span><span class="p">.</span><span class="n">playlist_version</span><span class="p">))</span>
    <span class="c1">// Add a playlist entry only if the album track exists.</span>
    <span class="p">.</span><span class="n">checkCondition</span><span class="p">(</span><span class="n">albumTrack</span><span class="p">,</span> <span class="n">trackExists</span><span class="p">())</span>
    <span class="p">.</span><span class="n">build</span><span class="p">()</span>
  <span class="n">db</span><span class="p">.</span><span class="n">transactionWrite</span><span class="p">(</span><span class="n">writeSet</span><span class="p">)</span>
<span class="p">}</span>

  <span class="k">private</span> <span class="k">fun</span> <span class="nf">ifPlaylistVersionIs</span><span class="p">(</span><span class="n">playlist_version</span><span class="p">:</span> <span class="n">Long</span><span class="p">):</span> <span class="n">DynamoDBTransactionWriteExpression</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">DynamoDBTransactionWriteExpression</span><span class="p">()</span>
    <span class="p">.</span><span class="n">withConditionExpression</span><span class="p">(</span><span class="s">&quot;playlist_version = :playlist_version&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="n">withExpressionAttributeValues</span><span class="p">(</span>
      <span class="n">mapOf</span><span class="p">(</span>
        <span class="s">&quot;:playlist_version&quot;</span> <span class="n">to</span> <span class="n">AttributeValue</span><span class="p">().</span><span class="n">withN</span><span class="p">(</span><span class="s">&quot;$playlist_version&quot;</span><span class="p">)</span>
      <span class="p">)</span>
    <span class="p">)</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">fun</span> <span class="nf">trackExists</span><span class="p">():</span> <span class="n">DynamoDBTransactionWriteExpression</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">DynamoDBTransactionWriteExpression</span><span class="p">()</span>
    <span class="p">.</span><span class="n">withConditionExpression</span><span class="p">(</span><span class="s">&quot;attribute_exists(track_title)&quot;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

</div>
<input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><label for="__tabbed_2_2">Java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kd">private</span> <span class="kd">final</span> <span class="n">MusicDb</span> <span class="n">db</span><span class="p">;</span>
<span class="kd">private</span> <span class="kd">final</span> <span class="n">MusicTable</span> <span class="n">table</span><span class="p">;</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">addTrackToPlaylist</span><span class="p">(</span>
    <span class="n">String</span> <span class="n">playlistToken</span><span class="p">,</span>
    <span class="n">AlbumTrack</span><span class="p">.</span><span class="na">Key</span> <span class="n">albumTrack</span>
<span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Read.</span>
  <span class="n">PlaylistInfo</span> <span class="n">existing</span> <span class="o">=</span> <span class="n">table</span><span class="p">.</span><span class="na">playlistInfo</span><span class="p">().</span><span class="na">load</span><span class="p">(</span><span class="k">new</span> <span class="n">PlaylistInfo</span><span class="p">.</span><span class="na">Key</span><span class="p">(</span><span class="n">playlistToken</span><span class="p">));</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">existing</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalStateException</span><span class="p">(</span><span class="s">&quot;Playlist does not exist: &quot;</span> <span class="o">+</span> <span class="n">playlistToken</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="c1">// Modify.</span>
  <span class="n">List</span><span class="o">&lt;</span><span class="n">AlbumTrack</span><span class="p">.</span><span class="na">Key</span><span class="o">&gt;</span> <span class="n">playlistTrackTokens</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="n">existing</span><span class="p">.</span><span class="na">playlist_tracks</span><span class="p">);</span>
  <span class="n">playlistTrackTokens</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">albumTrack</span><span class="p">);</span>
  <span class="n">PlaylistInfo</span> <span class="n">newPlaylist</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PlaylistInfo</span><span class="p">(</span>
      <span class="n">existing</span><span class="p">.</span><span class="na">playlist_token</span><span class="p">,</span>
      <span class="n">existing</span><span class="p">.</span><span class="na">playlist_name</span><span class="p">,</span>
      <span class="c1">// playlist_tracks.</span>
      <span class="n">playlistTrackTokens</span><span class="p">,</span>
      <span class="c1">// playlist_version.</span>
      <span class="n">existing</span><span class="p">.</span><span class="na">playlist_version</span> <span class="o">+</span> <span class="mi">1</span>
  <span class="p">);</span>
  <span class="c1">// Write.</span>
  <span class="n">TransactionWriteSet</span> <span class="n">writeSet</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TransactionWriteSet</span><span class="p">.</span><span class="na">Builder</span><span class="p">()</span>
      <span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">newPlaylist</span><span class="p">,</span> <span class="n">ifPlaylistVersionIs</span><span class="p">(</span><span class="n">existing</span><span class="p">.</span><span class="na">playlist_version</span><span class="p">))</span>
      <span class="c1">// Add a playlist entry only if the album track exists.</span>
      <span class="p">.</span><span class="na">checkCondition</span><span class="p">(</span><span class="n">albumTrack</span><span class="p">,</span> <span class="n">trackExists</span><span class="p">())</span>
      <span class="p">.</span><span class="na">build</span><span class="p">();</span>
  <span class="n">db</span><span class="p">.</span><span class="na">transactionWrite</span><span class="p">(</span><span class="n">writeSet</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">private</span> <span class="n">DynamoDBTransactionWriteExpression</span> <span class="nf">ifPlaylistVersionIs</span><span class="p">(</span><span class="n">Long</span> <span class="n">playlist_version</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">new</span> <span class="n">DynamoDBTransactionWriteExpression</span><span class="p">()</span>
      <span class="p">.</span><span class="na">withConditionExpression</span><span class="p">(</span><span class="s">&quot;playlist_version = :playlist_version&quot;</span><span class="p">)</span>
      <span class="p">.</span><span class="na">withExpressionAttributeValues</span><span class="p">(</span>
          <span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;:playlist_version&quot;</span><span class="p">,</span> <span class="k">new</span> <span class="n">AttributeValue</span><span class="p">().</span><span class="na">withN</span><span class="p">(</span><span class="s">&quot;$playlist_version&quot;</span><span class="p">)));</span>
<span class="p">}</span>

<span class="kd">private</span> <span class="n">DynamoDBTransactionWriteExpression</span> <span class="nf">trackExists</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">new</span> <span class="n">DynamoDBTransactionWriteExpression</span><span class="p">()</span>
      <span class="p">.</span><span class="na">withConditionExpression</span><span class="p">(</span><span class="s">&quot;attribute_exists(track_title)&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

</div>
</div>
<h3 id="writing-pager">Writing Pager<a class="headerlink" href="#writing-pager" title="Permanent link">&para;</a></h3>
<p>To make the 25 item limit easier to work with, we created <code>WritingPager</code>: a control flow abstraction for paging transactional writes.</p>
<p>The following example decomposes the operation into multiple transactions containing less than 25 items.</p>
<div class="tabbed-set" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><label for="__tabbed_3_1">Kotlin</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">private</span> <span class="k">val</span> <span class="py">db</span><span class="p">:</span> <span class="n">MusicDb</span>
<span class="k">private</span> <span class="k">val</span> <span class="py">table</span><span class="p">:</span> <span class="n">MusicTable</span>

<span class="k">fun</span> <span class="nf">addTracksToPlaylist</span><span class="p">(</span>
  <span class="n">playlistToken</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span>
  <span class="n">albumTracks</span><span class="p">:</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">AlbumTrack</span><span class="p">.</span><span class="n">Key</span><span class="p">&gt;</span>
<span class="p">)</span> <span class="p">{</span>
  <span class="n">db</span><span class="p">.</span><span class="n">transactionWritingPager</span><span class="p">(</span>
    <span class="n">albumTracks</span><span class="p">,</span>
    <span class="n">maxTransactionItems</span> <span class="p">=</span> <span class="m">25</span><span class="p">,</span>
    <span class="n">handler</span> <span class="p">=</span> <span class="n">AlbumTrackWritingPagerHandler</span><span class="p">(</span><span class="n">playlistToken</span><span class="p">,</span> <span class="n">table</span><span class="p">)</span>
  <span class="p">).</span><span class="n">execute</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">AlbumTrackWritingPagerHandler</span><span class="p">(</span>
  <span class="k">private</span> <span class="k">val</span> <span class="py">playlistToken</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span>
  <span class="k">private</span> <span class="k">val</span> <span class="py">table</span><span class="p">:</span> <span class="n">MusicTable</span>
<span class="p">)</span> <span class="p">:</span> <span class="n">WritingPager</span><span class="p">.</span><span class="n">Handler</span><span class="p">&lt;</span><span class="n">AlbumTrack</span><span class="p">.</span><span class="n">Key</span><span class="p">&gt;</span> <span class="p">{</span>
  <span class="k">private</span> <span class="k">lateinit</span> <span class="k">var</span> <span class="py">currentPagePlaylistInfo</span><span class="p">:</span> <span class="n">PlaylistInfo</span>
  <span class="k">private</span> <span class="k">lateinit</span> <span class="k">var</span> <span class="py">currentPageTracks</span><span class="p">:</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">AlbumTrack</span><span class="p">.</span><span class="n">Key</span><span class="p">&gt;</span>

  <span class="k">override</span> <span class="k">fun</span> <span class="nf">eachPage</span><span class="p">(</span><span class="n">proceed</span><span class="p">:</span> <span class="p">()</span> <span class="p">-&gt;</span> <span class="n">Unit</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">proceed</span><span class="p">()</span>
  <span class="p">}</span>

  <span class="k">override</span> <span class="k">fun</span> <span class="nf">beforePage</span><span class="p">(</span>
    <span class="n">remainingUpdates</span><span class="p">:</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">AlbumTrack</span><span class="p">.</span><span class="n">Key</span><span class="p">&gt;,</span>
    <span class="n">maxTransactionItems</span><span class="p">:</span> <span class="n">Int</span>
  <span class="p">):</span> <span class="n">Int</span> <span class="p">{</span>
    <span class="c1">// Reserve 1 for the playlist info at the end.</span>
    <span class="n">currentPageTracks</span> <span class="p">=</span> <span class="n">remainingUpdates</span><span class="p">.</span><span class="n">take</span><span class="p">((</span><span class="n">maxTransactionItems</span> <span class="p">-</span> <span class="m">1</span><span class="p">))</span>
    <span class="n">currentPagePlaylistInfo</span> <span class="p">=</span> <span class="n">table</span><span class="p">.</span><span class="n">playlistInfo</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">PlaylistInfo</span><span class="p">.</span><span class="n">Key</span><span class="p">(</span><span class="n">playlistToken</span><span class="p">))</span><span class="o">!!</span>
    <span class="k">return</span> <span class="n">currentPageTracks</span><span class="p">.</span><span class="n">size</span>
  <span class="p">}</span>

  <span class="k">override</span> <span class="k">fun</span> <span class="nf">item</span><span class="p">(</span><span class="n">builder</span><span class="p">:</span> <span class="n">TransactionWriteSet</span><span class="p">.</span><span class="n">Builder</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">AlbumTrack</span><span class="p">.</span><span class="n">Key</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">builder</span><span class="p">.</span><span class="n">checkCondition</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">trackExists</span><span class="p">())</span>
  <span class="p">}</span>

  <span class="k">override</span> <span class="k">fun</span> <span class="nf">finishPage</span><span class="p">(</span><span class="n">builder</span><span class="p">:</span> <span class="n">TransactionWriteSet</span><span class="p">.</span><span class="n">Builder</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">val</span> <span class="py">existing</span> <span class="p">=</span> <span class="n">currentPagePlaylistInfo</span>
    <span class="k">val</span> <span class="py">newPlaylist</span> <span class="p">=</span> <span class="n">existing</span><span class="p">.</span><span class="n">copy</span><span class="p">(</span>
      <span class="n">playlist_tracks</span> <span class="p">=</span> <span class="n">existing</span><span class="p">.</span><span class="n">playlist_tracks</span> <span class="p">+</span> <span class="n">currentPageTracks</span><span class="p">,</span>
      <span class="n">playlist_version</span> <span class="p">=</span> <span class="n">existing</span><span class="p">.</span><span class="n">playlist_version</span> <span class="p">+</span> <span class="m">1</span>
    <span class="p">)</span>
    <span class="n">builder</span><span class="p">.</span><span class="n">save</span><span class="p">(</span><span class="n">newPlaylist</span><span class="p">,</span> <span class="n">ifPlaylistVersionIs</span><span class="p">(</span><span class="n">existing</span><span class="p">.</span><span class="n">playlist_version</span><span class="p">))</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</div>
<input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><label for="__tabbed_3_2">Java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kd">private</span> <span class="kd">final</span> <span class="n">MusicDb</span> <span class="n">db</span><span class="p">;</span>
<span class="kd">private</span> <span class="kd">final</span> <span class="n">MusicTable</span> <span class="n">table</span><span class="p">;</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">addTracksToPlaylist</span><span class="p">(</span>
    <span class="n">String</span> <span class="n">playlistToken</span><span class="p">,</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">AlbumTrack</span><span class="p">.</span><span class="na">Key</span><span class="o">&gt;</span> <span class="n">albumTracks</span>
<span class="p">)</span> <span class="p">{</span>
  <span class="k">new</span> <span class="n">WritingPager</span><span class="o">&lt;&gt;</span><span class="p">(</span>
      <span class="n">db</span><span class="p">,</span>
      <span class="n">albumTracks</span><span class="p">,</span>
      <span class="c1">// maxTransactionItems.</span>
      <span class="mi">25</span><span class="p">,</span>
      <span class="c1">// handler.</span>
      <span class="k">new</span> <span class="n">AlbumTrackWritingPagerHandler</span><span class="p">(</span><span class="n">playlistToken</span><span class="p">,</span> <span class="n">table</span><span class="p">)</span>
  <span class="p">).</span><span class="na">execute</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">AlbumTrackWritingPagerHandler</span> <span class="kd">implements</span> <span class="n">WritingPager</span><span class="p">.</span><span class="na">Handler</span><span class="o">&lt;</span><span class="n">AlbumTrack</span><span class="p">.</span><span class="na">Key</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">playlistToken</span><span class="p">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">MusicTable</span> <span class="n">table</span><span class="p">;</span>
  <span class="kd">private</span> <span class="n">PlaylistInfo</span> <span class="n">currentPagePlaylistInfo</span><span class="p">;</span>
  <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">AlbumTrack</span><span class="p">.</span><span class="na">Key</span><span class="o">&gt;</span> <span class="n">currentPageTracks</span><span class="p">;</span>

  <span class="n">AlbumTrackWritingPagerHandler</span><span class="p">(</span><span class="n">String</span> <span class="n">playlistToken</span><span class="p">,</span>
      <span class="n">MusicTable</span> <span class="n">table</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="na">playlistToken</span> <span class="o">=</span> <span class="n">playlistToken</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="na">table</span> <span class="o">=</span> <span class="n">table</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">eachPage</span><span class="p">(</span><span class="n">Function0</span><span class="o">&lt;</span><span class="n">Unit</span><span class="o">&gt;</span> <span class="n">proceed</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">proceed</span><span class="p">.</span><span class="na">invoke</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">int</span> <span class="nf">beforePage</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">AlbumTrack</span><span class="p">.</span><span class="na">Key</span><span class="o">&gt;</span> <span class="n">remainingUpdates</span><span class="p">,</span>
      <span class="kt">int</span> <span class="n">maxTransactionItems</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Reserve 1 for the playlist info at the end.</span>
    <span class="n">currentPageTracks</span> <span class="o">=</span> <span class="n">remainingUpdates</span><span class="p">.</span><span class="na">subList</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">maxTransactionItems</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">currentPagePlaylistInfo</span> <span class="o">=</span> <span class="n">table</span><span class="p">.</span><span class="na">playlistInfo</span><span class="p">().</span><span class="na">load</span><span class="p">(</span><span class="k">new</span> <span class="n">PlaylistInfo</span><span class="p">.</span><span class="na">Key</span><span class="p">(</span><span class="n">playlistToken</span><span class="p">));</span>
    <span class="k">return</span> <span class="n">currentPageTracks</span><span class="p">.</span><span class="na">size</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">item</span><span class="p">(</span><span class="n">TransactionWriteSet</span><span class="p">.</span><span class="na">Builder</span> <span class="n">builder</span><span class="p">,</span> <span class="n">AlbumTrack</span><span class="p">.</span><span class="na">Key</span> <span class="n">item</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">builder</span><span class="p">.</span><span class="na">checkCondition</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">trackExists</span><span class="p">());</span>
  <span class="p">}</span>

  <span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">finishPage</span><span class="p">(</span><span class="n">TransactionWriteSet</span><span class="p">.</span><span class="na">Builder</span> <span class="n">builder</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">PlaylistInfo</span> <span class="n">existing</span> <span class="o">=</span> <span class="n">currentPagePlaylistInfo</span><span class="p">;</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">AlbumTrack</span><span class="p">.</span><span class="na">Key</span><span class="o">&gt;</span> <span class="n">playlistTrackTokens</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
    <span class="n">playlistTrackTokens</span><span class="p">.</span><span class="na">addAll</span><span class="p">(</span><span class="n">existing</span><span class="p">.</span><span class="na">playlist_tracks</span><span class="p">);</span>
    <span class="n">playlistTrackTokens</span><span class="p">.</span><span class="na">addAll</span><span class="p">(</span><span class="n">currentPageTracks</span><span class="p">);</span>
    <span class="n">PlaylistInfo</span> <span class="n">newPlaylist</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PlaylistInfo</span><span class="p">(</span>
        <span class="n">existing</span><span class="p">.</span><span class="na">playlist_token</span><span class="p">,</span>
        <span class="n">existing</span><span class="p">.</span><span class="na">playlist_name</span><span class="p">,</span>
        <span class="c1">// playlist_tracks.</span>
        <span class="n">playlistTrackTokens</span><span class="p">,</span>
        <span class="c1">// playlist_version.</span>
        <span class="n">existing</span><span class="p">.</span><span class="na">playlist_version</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="p">);</span>
    <span class="n">builder</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">newPlaylist</span><span class="p">,</span> <span class="n">ifPlaylistVersionIs</span><span class="p">(</span><span class="n">existing</span><span class="p">.</span><span class="na">playlist_version</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</div>
</div>
<hr />
<p>Check out the code samples on Github:</p>
<ul>
<li>Music Library (<a href="https://github.com/cashapp/tempest/tree/master/samples/musiclibrary/src/main/kotlin/app/cash/tempest/musiclibrary">.kt</a>, <a href="https://github.com/cashapp/tempest/tree/master/samples/musiclibrary/src/main/java/app/cash/tempest/musiclibrary/java">.java</a>)</li>
<li>Transaction (<a href="https://github.com/cashapp/tempest/blob/master/samples/guides/src/main/kotlin/app/cash/tempest/guides/Transaction.kt">.kt</a>, <a href="https://github.com/cashapp/tempest/blob/master/samples/guides/src/main/java/app/cash/tempest/guides/java/Transaction.java">.java</a>)</li>
</ul>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../query_scan/" title="Query & Scan" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Query & Scan
              </div>
            </div>
          </a>
        
        
          <a href="../testing/" title="Testing" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Testing
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020 Square, Inc.
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.d710d30a.min.js"></script>
      <script src="../../assets/javascripts/bundle.4a5ba8d6.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.9b3611bd.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="../../script/mermaid.min.js"></script>
      
    
  </body>
</html>